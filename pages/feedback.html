<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å ‚Äî Morphe</title>

  <!-- Favicon & manifest -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/icon-32.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#f97316">

  <!-- –ë–∞–∑–∞ -->
  <link rel="stylesheet" href="/styles/base/reset.css">
  <link rel="stylesheet" href="/styles/base/theme.css">
  <link rel="stylesheet" href="/styles/base/typography.css">
  <link rel="stylesheet" href="/styles/base/utilities.css">

  <!-- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã -->
  <link rel="stylesheet" href="/styles/components/buttons.css">
  <link rel="stylesheet" href="/styles/components/cards.css">
  <link rel="stylesheet" href="/styles/components/forms.css">
  <link rel="stylesheet" href="/styles/components/tabs.css">
  <link rel="stylesheet" href="/styles/components/mobile-menu.css">

  <!-- –ú–∞–∫–µ—Ç -->
  <link rel="stylesheet" href="/styles/layout/header.css">
  <link rel="stylesheet" href="/styles/layout/footer.css">
  <link rel="stylesheet" href="/styles/layout/scroll-top.css">
  <link rel="stylesheet" href="/styles/pages/feedback.css"> 
</head>
<body>
  <div id="header-placeholder"></div>

  <main class="feedback-page">
    <h1>–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</h1>
    <p>–í–∞—à–µ –º–Ω–µ–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç Morphe —Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –ª—É—á—à–µ. –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ, —á—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å, –∏–ª–∏ –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å –∏–¥–µ–µ–π!</p>

    <div class="feedback-card">
      <form id="feedbackForm">
        <div class="form-group">
          <label for="feedbackType">–¢–∏–ø –æ–±—Ä–∞—â–µ–Ω–∏—è</label>
          <select id="feedbackType" class="form-control" required>
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ...</option>
            <option value="idea">–ò–¥–µ—è –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è</option>
            <option value="bug">–û—à–∏–±–∫–∞ –∏–ª–∏ –±–∞–≥</option>
            <option value="question">–í–æ–ø—Ä–æ—Å</option>
            <option value="praise">–°–ª–æ–≤–æ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏ üíõ</option>
          </select>
        </div>

        <div class="form-group">
          <label for="feedbackEmail">Email (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
          <input type="email" id="feedbackEmail" class="form-control" placeholder="you@example.com">
          <small style="color: var(--text-secondary); font-size: 0.875rem;">
            –ù—É–∂–µ–Ω, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç
          </small>
        </div>

        <div class="form-group">
          <label for="feedbackMessage">–°–æ–æ–±—â–µ–Ω–∏–µ</label>
          <textarea id="feedbackMessage" class="form-control" placeholder="–û–ø–∏—à–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ..." required></textarea>
        </div>

        <button type="submit" class="btn-primary btn-submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>

        <div id="feedbackStatus"></div>
      </form>

      <div class="alternative-options">
        <p>–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ GitHub?</p>
        <a href="https://github.com/Akalughin84" target="_blank" class="btn-outline">
          –û—Ç–∫—Ä—ã—Ç—å Issue ‚Üí
        </a>
      </div>
    </div>
  </main>

  <div id="footer-placeholder"></div>

  <script type="module">
    import { HeaderController } from '/core/HeaderController.js';

    document.addEventListener('DOMContentLoaded', async () => {
      await HeaderController.loadHeader();
      await HeaderController.loadFooter();

      const form = document.getElementById('feedbackForm');
      const statusEl = document.getElementById('feedbackStatus');

      form?.addEventListener('submit', async (e) => {
        e.preventDefault();

        const type = document.getElementById('feedbackType').value;
        const email = document.getElementById('feedbackEmail').value;
        const message = document.getElementById('feedbackMessage').value;

        // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã fetch() –∫ –±—ç–∫–µ–Ω–¥—É
        // –ù–æ Morphe –æ—Ñ—Ñ–ª–∞–π–Ω ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –∫–∞–∫ "–æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
        const feedback = {
          id: Date.now(),
          type,
          email: email || null,
          message,
          timestamp: new Date().toISOString(),
          sent: false
        };

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –æ—á–µ—Ä–µ–¥—å
        const queue = JSON.parse(localStorage.getItem('morphe_feedback_queue') || '[]');
        queue.push(feedback);
        localStorage.setItem('morphe_feedback_queue', JSON.stringify(queue));

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å
        statusEl.className = 'status-message status-success';
        statusEl.textContent = '‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ! –û–Ω–æ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, –∫–æ–≥–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.';

        // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
        form.reset();

        // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ (–≤ –±—É–¥—É—â–µ–º ‚Äî —á–µ—Ä–µ–∑ Service Worker)
        console.log('Feedback saved to queue:', feedback);
      });
    });
  </script>
</body>
</html>