<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Morphe ‚Äî –¢–≤–æ—è —Ñ–æ—Ä–º–∞ ‚Äî —Ç–≤–æ—è –∏—Å—Ç–æ—Ä–∏—è</title>

  <!-- SEO & Open Graph -->
  <meta name="description" content="–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏, —É–º–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ, –Ω–∞—É—á–Ω—ã–µ –¥–æ–±–∞–≤–∫–∏. –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω.">
  <meta property="og:title" content="Morphe ‚Äî –¢–≤–æ—è —Ñ–æ—Ä–º–∞ ‚Äî —Ç–≤–æ—è –∏—Å—Ç–æ—Ä–∏—è">
  <meta property="og:description" content="–°—Ç–∞–Ω—å –ª—É—á—à–µ–π –≤–µ—Ä—Å–∏–µ–π —Å–µ–±—è —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º AI-—Ç—Ä–µ–Ω–µ—Ä–æ–º.">
  <!--<meta property="og:image" content="/assets/screenshots/preview.jpg">-->
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Morphe ‚Äî –¢–≤–æ—è —Ñ–æ—Ä–º–∞ ‚Äî —Ç–≤–æ—è –∏—Å—Ç–æ—Ä–∏—è">
  <meta name="twitter:description" content="–°—Ç–∞–Ω—å –ª—É—á—à–µ–π –≤–µ—Ä—Å–∏–µ–π —Å–µ–±—è —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º AI-—Ç—Ä–µ–Ω–µ—Ä–æ–º.">
  <!--<meta name="twitter:image" content="/assets/screenshots/preview.jpg">-->

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/icon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/icon-16.png">
  <link rel="apple-touch-icon" href="/assets/icons/icon-192.png">
  <link rel="manifest" href="/manifest.json">

  <!-- Theme color for PWA -->
  <meta name="theme-color" content="#8b5cf6">

  <!-- –®—Ä–∏—Ñ—Ç—ã -->
  <link rel="preconnect" href="https://fonts.googleapis.com  ">
  <link rel="preconnect" href="https://fonts.gstatic.com  " crossorigin>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@700;800&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link href="  https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@700;800&display=swap" rel="stylesheet">
  </noscript>

  <!-- –°—Ç–∏–ª–∏ -->
  <link rel="stylesheet" href="/styles.css">
  <link rel="stylesheet" href="/styles-shared.css">
  <link rel="stylesheet" href="/styles-home.css">

  <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã –í–†–ï–ú–ï–ù–ù–û –û–¢–ö–õ–Æ–ß–ï–ù–ê -->
  <!--
  <style>
    .theme-toggle-btn {
      position: fixed;
      top: calc(1rem + env(safe-area-inset-top));
      right: 1rem;
      width: 40px;
      height: 40px;
      border: none;
      background: var(--bg-surface-alt);
      color: var(--text-primary);
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 2px 8px var(--shadow);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      transition: all 0.3s ease;
    }

    .theme-toggle-btn:hover {
      transform: scale(1.1);
      background: var(--accent);
      color: white;
    }
  </style>
  -->
</head>
<body>

  <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã –í–†–ï–ú–ï–ù–ù–û –£–î–ê–õ–ï–ù–ê -->
  <!-- <button id="themeToggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É" class="theme-toggle-btn">
    <span class="theme-icon">üåô</span>
  </button> -->

  <!-- –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —à–∞–ø–∫–∏ -->
  <div id="header-placeholder"></div>

  <main id="main-content">
    <!-- –ì–µ—Ä–æ–π -->
    <section class="hero">
      <div class="container">
        <div class="hero-wrapper">
          <div class="hero-content">
            <div class="hero-badge">–°–æ–∑–¥–∞–Ω–æ –ê–ª–µ–∫—Å–µ–µ–º –ö–∞–ª—É–≥–∏–Ω—ã–º</div>
            <h1>–¢–≤–æ—è —Ñ–æ—Ä–º–∞ ‚Äî <span>—Ç–≤–æ—è –∏—Å—Ç–æ—Ä–∏—è</span></h1>
            <p class="hero-subtitle">
              Morphe –Ω–µ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–±—è –≤ –∫–æ–≥–æ-—Ç–æ –¥—Ä—É–≥–æ–≥–æ.<br>
              –û–Ω –ø–æ–º–æ–≥–∞–µ—Ç —Ç–µ–±–µ —Å—Ç–∞—Ç—å <strong>–ª—É—á—à–µ–π –≤–µ—Ä—Å–∏–µ–π —Å–µ–±—è</strong>.
            </p>
            <a href="/pages/workouts.html" class="cta-button">–ù–∞—á–∞—Ç—å –º–æ—é —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é ‚Üí</a>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
            <div class="user-summary" id="current-stats">
              –ó–∞–≥—Ä—É–∑–∫–∞...
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –±–µ–∑ –≥—Ä–∞—Ñ–∏–∫–æ–≤ -->
    <section class="dashboard-section">
      <div class="container">
        <h2>üìä –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å</h2>
        <p id="dashboardStatus">–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ...</p>
        <div id="analyticsSummary" style="display: none;">
          <h3 id="analyticsTitle">‚Äî</h3>
          <p id="analyticsText">‚Äî</p>
        </div>
      </div>
    </section>

    <!-- –ü–æ—á–µ–º—É Morphe? -->
    <section class="why-section">
      <div class="container">
        <h2>–ü–æ—á–µ–º—É <span>Morphe?</span></h2>
        <p class="section-intro">
          –ü–æ—Ç–æ–º—É —á—Ç–æ –Ω–∞—Å—Ç–æ—è—â–∞—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è, –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏.
        </p>
        <div class="why-grid">
          <div class="why-card">
            <div class="icon">üß†</div>
            <h3>–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h3>
            <p>–ü—Ä–æ–≥—Ä–∞–º–º–∞ –º–µ–Ω—è–µ—Ç—Å—è –ø–æ–¥ —Ç–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å, —É—Å—Ç–∞–ª–æ—Å—Ç—å –∏ —Ü–µ–ª–∏.</p>
          </div>
          <div class="why-card">
            <div class="icon">üçΩ</div>
            <h3>–£–º–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ</h3>
            <p>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç –ë–ñ–£ –∏ —Å–æ–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö.</p>
          </div>
          <div class="why-card">
            <div class="icon">üíä</div>
            <h3>–ù–∞—É—á–Ω—ã–µ –¥–æ–±–∞–≤–∫–∏</h3>
            <p>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π ‚Äî –±–µ–∑ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞ –∏ –º–∏—Ñ–æ–≤.</p>
          </div>
          <div class="why-card">
            <div class="icon">üìà</div>
            <h3>–ü—Ä–æ–≥–Ω–æ–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</h3>
            <p>–£–∑–Ω–∞–π, –∫–æ–≥–¥–∞ –¥–æ—Å—Ç–∏–≥–Ω–µ—à—å —Ü–µ–ª–∏ ‚Äî –∏ —á—Ç–æ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- –ê–≤—Ç–æ—Ä -->
    <section class="author-section">
      <div class="container">
        <div class="author-content">
          <div class="author-photo">
            <div class="photo-placeholder">–ê–ö</div>
          </div>
          <div class="author-text">
            <h2>–°–æ–∑–¥–∞–Ω–æ <span>–¥–ª—è –ª—é–¥–µ–π</span></h2>
            <p>–Ø ‚Äî –ê–ª–µ–∫—Å–µ–π –ö–∞–ª—É–≥–∏–Ω. –Ø –Ω–µ –ø—Ä–æ–¥–∞—é —Ç–µ–±–µ –º–µ—á—Ç—É. –Ø –¥–∞—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, —á—Ç–æ–±—ã —Ç—ã –µ—ë —Å–æ–∑–¥–∞–ª —Å–∞–º.</p>
            <p>–ù–∞—Å—Ç–æ—è—â–∏–π —Ä–æ—Å—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —Ç—ã –ø–µ—Ä–µ—Å—Ç–∞—ë—à—å —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å–µ–±—è —Å –¥—Ä—É–≥–∏–º–∏.</p>
            <p>–≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî –º–æ–π –≤–∫–ª–∞–¥ –≤ —Ç–æ, —á—Ç–æ–±—ã <strong>–∑–¥–æ—Ä–æ–≤—å–µ —Å—Ç–∞–ª–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º, —á–µ—Å—Ç–Ω—ã–º –∏ –æ—Å–æ–∑–Ω–∞–Ω–Ω—ã–º</strong>.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- –§–∏–Ω–∞–ª—å–Ω—ã–π CTA -->
    <section class="final-cta">
      <div class="container">
        <h2>–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å?</h2>
        <p>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ —Ç–µ–º, –∫—Ç–æ –≤—ã–±–∏—Ä–∞–µ—Ç —Ä–æ—Å—Ç ‚Äî –±–µ–∑ —Ä–µ–∫–ª–∞–º—ã, –ø–æ–¥–ø–∏—Å–æ–∫ –∏ –ª–∂–∏.</p>
        <a href="/pages/profile.html" class="cta-button">–ù–∞—á–∞—Ç—å —Å–µ–π—á–∞—Å</a>
      </div>
    </section>
  </main>

  <!-- –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –ø–æ–¥–≤–∞–ª–∞ -->
  <div id="footer-placeholder"></div>

  <!-- Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('‚úÖ SW –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', reg.scope))
          .catch(err => console.log('‚ùå –û—à–∏–±–∫–∞ SW:', err));
      });
    }
  </script>

  <!-- –ú–æ–¥—É–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —è–¥—Ä–∞ -->
  <script type="module">
    // === –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è themeToggle ===
    // if (document.getElementById('themeToggle')) {
    //   const duplicates = document.querySelectorAll('#themeToggle:not(:first-of-type)');
    //   duplicates.forEach(el => el.remove());
    // }

    // === –ò–º–ø–æ—Ä—Ç—ã —á–µ—Ä–µ–∑ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ ===
    import { HeaderController } from './core/HeaderController.js';
    // import { ThemeManager } from './core/themeManager.js'; // ‚Üê –í–†–ï–ú–ï–ù–ù–û –û–¢–ö–õ–Æ–ß–Å–ù
    import { HomeDashboard } from './core/HomeDashboard.js';
    import { AnalyticsEngine } from './core/analytics.js';
    import { OnboardingManager } from './modules/onboardingManager.js';

    document.addEventListener('DOMContentLoaded', async () => {
      try {
        // === –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ ===
        const onboarding = new OnboardingManager();
        if (onboarding.shouldShow()) {
          window.location.href = '/pages/onboarding.html';
          return;
        }

        // === –¢–µ–º–∞ ‚Äî –í–†–ï–ú–ï–ù–ù–û –û–¢–ö–õ–Æ–ß–ï–ù–ê ===
        // const themeManager = new ThemeManager();
        // const themeToggle = document.getElementById('themeToggle');
        // const themeColorMeta = document.querySelector('meta[name="theme-color"]');

        // function updateThemeIcon() {
        //   const icon = themeToggle.querySelector('.theme-icon');
        //   if (icon) {
        //     icon.textContent = themeManager.get() === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        //   }
        // }

        // function updateThemeColor() {
        //   if (themeColorMeta) {
        //     const color = themeManager.get() === 'dark' ? '#1e293b' : '#8b5cf6';
        //     themeColorMeta.setAttribute('content', color);
        //   }
        // }

        // themeToggle?.addEventListener('click', () => {
        //   themeManager.toggle();
        //   updateThemeIcon();
        //   updateThemeColor();
        // });

        // updateThemeIcon(); // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–∫–æ–Ω–∫–∏
        // updateThemeColor(); // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ü–≤–µ—Ç–∞ —Ç–µ–º—ã

        // === –ó–∞–≥—Ä—É–∑–∫–∞ —à–∞–ø–∫–∏ ===
        await HeaderController.loadHeader();

        // === –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã ===
        const dashboard = new HomeDashboard();
        await dashboard.init();

        // –û–±–Ω–æ–≤–ª—è–µ–º user-summary, –µ—Å–ª–∏ HomeDashboard –Ω–µ —Å–¥–µ–ª–∞–ª —ç—Ç–æ–≥–æ
        const currentStatsEl = document.getElementById('current-stats');
        if (currentStatsEl && currentStatsEl.textContent === '–ó–∞–≥—Ä—É–∑–∫–∞...') {
          currentStatsEl.textContent = '–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã. –ù–∞—á–Ω–∏—Ç–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è!';
        }

        // === –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –±–µ–∑ –≥—Ä–∞—Ñ–∏–∫–æ–≤ ===
        const analyticsStatus = document.getElementById('dashboardStatus');
        const analyticsSummary = document.getElementById('analyticsSummary');
        const analyticsTitle = document.getElementById('analyticsTitle');
        const analyticsText = document.getElementById('analyticsText');

        try {
          const analytics = new AnalyticsEngine();
          const summary = analytics.getSummary();

          analyticsTitle.textContent = summary.title || '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö';
          analyticsText.textContent = summary.summary || '–ù–∞—á–Ω–∏—Ç–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å.';

          analyticsStatus.style.display = 'none';
          analyticsSummary.style.display = 'block';

        } catch (err) {
          analyticsStatus.textContent = `‚ùå –û—à–∏–±–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏: ${err.message}`;
          analyticsStatus.className = 'error-text';
          console.error(err);
        }

      } catch (err) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ index.html:', err);
        const statusEl = document.getElementById('dashboardStatus');
        if (statusEl) {
          statusEl.textContent = "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö.";
          statusEl.className = 'error-text';
        }
      }
    });

    // === –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥–≤–∞–ª–∞ ===
    document.addEventListener('DOMContentLoaded', async () => {
      setTimeout(async () => {
        try {
          await HeaderController.loadFooter();
        } catch (err) {
          console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–¥–≤–∞–ª–∞:', err);
        }
      }, 0);
    });
  </script>
</body>
</html>
